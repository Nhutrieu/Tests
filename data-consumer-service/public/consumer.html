<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV Data Analytics Marketplace</title>
    <link rel="stylesheet" href="css/consumer.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-icon">‚ö°</span>
                <span>EV</span>
            </div>
            <ul class="nav-menu">
                <li><button class="nav-btn active" data-page="dashboard">Danh s√°ch d·ªØ li·ªáu</button></li>
                <li><button class="nav-btn" data-page="analytics">Ph√¢n t√≠ch</button></li>
                <li><button class="nav-btn" data-page="account">T√†i kho·∫£n</button></li>
            </ul>
            <div class="nav-right">
                <button class="cart-btn" id="cartBtn">
                    <span class="cart-icon">üõí</span>
                    <span class="cart-count" id="cartCount">0</span>
                </button>
                <button class="logout-btn" id="logoutBtn">ƒêƒÉng xu·∫•t</button>
            </div>
        </div>
    </nav>

    <!-- Dashboard Page -->
    <div class="page" id="dashboard-page">
        <div class="container">
            <h1>Dataset</h1>
            <div class="search-section">
                <input type="text" id="searchInput" class="search-bar" placeholder="T√¨m ki·∫øm g√≥i d·ªØ li·ªáu...">
                <button class="filter-btn" id="filterBtn">üîΩ B·ªô l·ªçc</button>
            </div>

            <!-- Filter Panel -->
            <div class="filter-panel" id="filterPanel" style="display: none;">
                <div class="filter-group">
                    <label>Danh m·ª•c:</label>
                    <select id="categoryFilter">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="charging">Tr·∫°m s·∫°c</option>
                        <option value="battery">Pin</option>
                        <option value="performance">Hi·ªáu su·∫•t</option>
                        <option value="market">Th·ªã tr∆∞·ªùng</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Lo·∫°i xe:</label>
                    <select id="vehicleTypeFilter">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="EV">EV</option>
                        <option value="Hybrid">Hybrid</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Kho·∫£ng gi√°:</label>
                    <input type="range" id="priceFilter" min="0" max="100000000" value="100000000">
                    <span id="priceValue">100,000,000</span>
                </div>
                <div class="filter-group">
                    <label>ƒê·ªãnh d·∫°ng:</label>
                    <select id="formatFilter">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="csv">CSV</option>
                        <option value="json">JSON</option>
                    </select>
                </div>
                <button class="apply-filter-btn" id="applyFilterBtn">√Åp d·ª•ng</button>
            </div>

            <!-- Sort Options -->
            <div class="sort-section">
                <label>S·∫Øp x·∫øp:</label>
                <select id="sortSelect">
                    <option value="popular">Ph·ªï bi·∫øn</option>
                    <option value="newest">M·ªõi nh·∫•t</option>
                    <option value="price-low">Gi√° th·∫•p</option>
                    <option value="price-high">Gi√° cao</option>
                    <option value="rating">ƒê√°nh gi√°</option>
                </select>
            </div>

            <!-- Data Packages Grid -->
            <div class="packages-grid" id="packagesGrid">
                <!-- Packages will be inserted here -->
            </div>
        </div>
    </div>


    <!-- Analytics Page -->
    <div class="page" id="analytics-page" style="display: none;">
        <div class="container">
            <h1>C√¥ng c·ª• Ph√¢n t√≠ch</h1>
            <div class="analytics-grid">
                <div class="chart-card locked">
                    <div class="chart-header">
                        <h3>Tr·∫°ng th√°i Pin (SoC)</h3>
                        <span class="lock-icon">üîí</span>
                    </div>
                    <canvas id="socChart"></canvas>
                </div>

                <div class="chart-card locked">
                    <div class="chart-header">
                        <h3>T·∫ßn su·∫•t S·∫°c</h3>
                        <span class="lock-icon">üîí</span>
                    </div>
                    <canvas id="chargingFreqChart"></canvas>
                </div>

                <div class="chart-card locked">
                    <div class="chart-header">
                        <h3>Qu√£ng ƒë∆∞·ªùng H√†ng ng√†y</h3>
                        <span class="lock-icon">üîí</span>
                    </div>
                    <canvas id="rangeChart"></canvas>
                </div>

                <div class="chart-card locked">
                    <div class="chart-header">
                        <h3>Ti√™u th·ª• NƒÉng l∆∞·ª£ng</h3>
                        <span class="lock-icon">üîí</span>
                    </div>
                    <canvas id="consumptionChart"></canvas>
                </div>

                <div class="chart-card locked">
                    <div class="chart-header">
                        <h3>Ph√¢n b·ªë Lo·∫°i xe</h3>
                        <span class="lock-icon">üîí</span>
                    </div>
                    <canvas id="vehicleTypeChart"></canvas>
                </div>

                <div class="chart-card locked">
                    <div class="chart-header">
                        <h3>CO‚ÇÇ Ti·∫øt ki·ªám</h3>
                        <span class="lock-icon">üîí</span>
                    </div>
                    <canvas id="co2Chart"></canvas>
                </div>
            </div>
            <!-- AI Chat Button -->
            <div id="ai-chat-btn">üí¨</div>

            <!-- AI Chat Popup -->
            <div id="ai-chat-popup">
                <div class="ai-header">
                    <span>AI Assistant</span>
                    <button id="ai-close-btn">‚úñ</button>
                </div>
                <div id="ai-messages"></div>
                <div class="ai-input">
                    <input id="aiUserInput" type="text" placeholder="Nh·∫≠p c√¢u h·ªèi...">
                    <button id="aiSendBtn">G·ª≠i</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Account Page -->
    <div class="page" id="account-page" style="display: none;">
        <div class="container">
            <h1>T√†i kho·∫£n c·ªßa t√¥i</h1>
            <div class="account-content simple-account">
                <div class="profile-section">
                    <div class="profile-header">
                        <div class="profile-avatar">üë§</div>
                        <div class="profile-info">
                            <h2 class="profile-name"></h2>
                            <p class="profile-email"></p>
                            <p class="profile-tier"></p>
                        </div>

                    </div>

                    <div class="account-actions">
                        <button id="editProfileBtn" class="btn-account primary">
                            Ch·ªânh s·ª≠a h·ªì s∆°
                        </button>
                        <button id="changePasswordBtn" class="btn-account">
                            ƒê·ªïi m·∫≠t kh·∫©u
                        </button>
                        <button id="logoutAccountBtn" class="btn-account outline">
                            ƒêƒÉng xu·∫•t
                        </button>
                        <button id="deleteAccountBtn" class="btn-account danger">
                            Xo√° t√†i kho·∫£n
                        </button>
                    </div>
                </div>

                <!-- N·∫øu mu·ªën gi·ªØ l·∫°i ph·∫ßn g√≥i ƒë√£ mua & API key th√¨ ƒë·ªÉ d∆∞·ªõi n√†y (tu·ª≥ b·∫°n): -->
                <div class="account-sections">
                    <div class="account-card">
                        <h3>C√°c g√≥i</h3>
                        <div class="purchase-list" id="purchaseList">
                            <!-- Render l·ªãch s·ª≠ mua ·ªü ƒë√¢y -->
                        </div>
                    </div>

                    <div class="account-card">
                        <h3>API Key c·ªßa b·∫°n</h3>
                        <button id="createApiKeyBtn" class="btn-account primary small">
                            T·∫°o API Key m·ªõi
                        </button>
                        <div id="apiKeyList" class="api-key-list">
                            <!-- Danh s√°ch key s·∫Ω ƒë∆∞·ª£c load ·ªü ƒë√¢y -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Gi·ªè h√†ng</h2>
                <button class="close-btn" id="closeCartBtn">&times;</button>
            </div>
            <div class="cart-items" id="cartItems">
                <p class="empty-cart">Gi·ªè h√†ng tr·ªëng</p>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>T·ªïng c·ªông:</span>
                    <span id="cartTotal">0</span>
                </div>

                <button class="checkout-btn">Thanh to√°n</button>
            </div>
        </div>
    </div>

    <!-- Package Detail Modal -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="detailTitle">Chi ti·∫øt g√≥i</h2>
                <button class="close-btn" id="closeDetailBtn">&times;</button>
            </div>
            <div class="detail-content" id="detailContent">
                <!-- Detail will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    <script src="js/consumers.js"></script>
    <script src="js/analytic.js"></script>
    <script src="js/purchases.js"></script>
    <script src="js/ai-chats.js"></script>
    <script src="js/api_keys.js"></script>
    <script src="js/account.js"></script>

    <!-- Modal Ch·ªânh s·ª≠a h·ªì s∆° -->
    <div class="account-modal" id="profileModal">
        <div class="account-modal-backdrop" data-close="profileModal"></div>
        <div class="account-modal-dialog">
            <div class="account-modal-header">
                <h2>Ch·ªânh s·ª≠a h·ªì s∆°</h2>
                <button class="account-modal-close" data-close="profileModal">‚úï</button>
            </div>
            <form id="profileForm" class="account-modal-body">
                <div class="form-group">
                    <label for="profileName">H·ªç v√† t√™n</label>
                    <input type="text" id="profileName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="profileEmail">Email</label>
                    <input type="email" id="profileEmail" name="email" required>
                </div>
                <div class="account-modal-footer">
                    <button type="button" class="btn-account outline" data-close="profileModal">Hu·ª∑</button>
                    <button type="submit" class="btn-account primary">L∆∞u thay ƒë·ªïi</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal ƒê·ªïi m·∫≠t kh·∫©u -->
    <div class="account-modal" id="passwordModal">
        <div class="account-modal-backdrop" data-close="passwordModal"></div>
        <div class="account-modal-dialog">
            <div class="account-modal-header">
                <h2>ƒê·ªïi m·∫≠t kh·∫©u</h2>
                <button class="account-modal-close" data-close="passwordModal">‚úï</button>
            </div>
            <form id="passwordForm" class="account-modal-body">
                <div class="form-group">
                    <label for="currentPassword">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                    <input type="password" id="currentPassword" name="current_password" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">M·∫≠t kh·∫©u m·ªõi</label>
                    <input type="password" id="newPassword" name="new_password" required minlength="8">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi</label>
                    <input type="password" id="confirmPassword" name="confirm_password" required minlength="8">
                </div>
                <div class="account-modal-footer">
                    <button type="button" class="btn-account outline" data-close="passwordModal">Hu·ª∑</button>
                    <button type="submit" class="btn-account primary">ƒê·ªïi m·∫≠t kh·∫©u</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Xo√° t√†i kho·∫£n -->
    <div class="account-modal" id="deleteModal">
        <div class="account-modal-backdrop" data-close="deleteModal"></div>
        <div class="account-modal-dialog">
            <div class="account-modal-header">
                <h2>Xo√° t√†i kho·∫£n</h2>
                <button class="account-modal-close" data-close="deleteModal">‚úï</button>
            </div>
            <form id="deleteForm" class="account-modal-body">
                <p class="warning-text">
                    H√†nh ƒë·ªông n√†y <strong>kh√¥ng th·ªÉ ho√†n t√°c</strong>. T·∫•t c·∫£ d·ªØ li·ªáu li√™n quan ƒë·∫øn t√†i kho·∫£n c·ªßa b·∫°n s·∫Ω
                    b·ªã xo√°.
                </p>
                <div class="form-group">
                    <label for="deletePassword">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ x√°c nh·∫≠n</label>
                    <input type="password" id="deletePassword" name="password" required>
                </div>
                <div class="account-modal-footer">
                    <button type="button" class="btn-account outline" data-close="deleteModal">Hu·ª∑</button>
                    <button type="submit" class="btn-account danger">T√¥i hi·ªÉu, xo√° t√†i kho·∫£n</button>
                </div>
            </form>
        </div>
    </div>
    <script>
    document.getElementById("logoutBtn").addEventListener("click", function () {
        window.location.href = "http://localhost:8006/src/pages/home.php";
    });
</script>




</body>

</html>
